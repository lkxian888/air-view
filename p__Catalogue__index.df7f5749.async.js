"use strict";(self.webpackChunkairview=self.webpackChunkairview||[]).push([[880],{5966:function(J,b,e){var B=e(97685),u=e(1413),L=e(91),d=e(21770),z=e(23323),h=e(55241),y=e(97435),A=e(67294),P=e(30798),o=e(85893),U=["fieldProps","proFieldProps"],g=["fieldProps","proFieldProps"],C="text",m=function(n){var t=n.fieldProps,l=n.proFieldProps,r=(0,L.Z)(n,U);return(0,o.jsx)(P.Z,(0,u.Z)({valueType:C,fieldProps:t,filedConfig:{valueType:C},proFieldProps:l},r))},x=function(n){var t=(0,d.Z)(n.open||!1,{value:n.open,onChange:n.onOpenChange}),l=(0,B.Z)(t,2),r=l[0],k=l[1];return(0,o.jsx)(z.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(N){var O,H=N.getFieldValue(n.name||[]);return(0,o.jsx)(h.Z,(0,u.Z)((0,u.Z)({getPopupContainer:function(p){return p&&p.parentNode?p.parentNode:p},onOpenChange:function(p){return k(p)},content:(0,o.jsxs)("div",{style:{padding:"4px 0"},children:[(O=n.statusRender)===null||O===void 0?void 0:O.call(n,H),n.strengthText?(0,o.jsx)("div",{style:{marginTop:10},children:(0,o.jsx)("span",{children:n.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},n.popoverProps),{},{open:r,children:n.children}))}})},R=function(n){var t=n.fieldProps,l=n.proFieldProps,r=(0,L.Z)(n,g),k=(0,A.useState)(!1),V=(0,B.Z)(k,2),N=V[0],O=V[1];return t!=null&&t.statusRender&&r.name?(0,o.jsx)(x,{name:r.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:N,onOpenChange:O,children:(0,o.jsx)("div",{children:(0,o.jsx)(P.Z,(0,u.Z)({valueType:"password",fieldProps:(0,u.Z)((0,u.Z)({},(0,y.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(S){var p;t==null||(p=t.onBlur)===null||p===void 0||p.call(t,S),O(!1)},onClick:function(S){var p;t==null||(p=t.onClick)===null||p===void 0||p.call(t,S),O(!0)}}),proFieldProps:l,filedConfig:{valueType:C}},r))})}):(0,o.jsx)(P.Z,(0,u.Z)({valueType:"password",fieldProps:t,proFieldProps:l,filedConfig:{valueType:C}},r))},j=m;j.Password=R,j.displayName="ProFormComponent",b.Z=j},50288:function(J,b,e){e.r(b),e.d(b,{default:function(){return re}});var B=e(19632),u=e.n(B),L=e(15009),d=e.n(L),z=e(99289),h=e.n(z),y=e(5574),A=e.n(y),P=e(67294),o=e(24969),U=e(25713),g=e(14726),C=e(97857),m=e.n(C),x=e(53424),R=e(37476),j=e(5966),a=e(59628),n=e(90199),t=e(36493),l=e(21074),r=e(85893),k=function(D){var E=D.visible,I=D.onCancel,s=D.item,W=D.onSuccess,_=(0,P.useRef)(),M=(0,x.useModel)("@@initialState"),T=M.initialState,Z=T||{},c=Z.currentUser,K=s!=null&&s.id&&!s.isAdd?" \u4FEE\u6539":"\u6DFB\u52A0",Y=function(){_.current&&_.current.resetFields()};(0,P.useEffect)(function(){if(E&&s!==null&&s!==void 0&&s.id&&!s.isAdd){var v;(v=_.current)===null||v===void 0||v.setFieldsValue(m()({},s))}else Y()},[E]);var F=function(){var v=h()(d()().mark(function G(w){return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!(s!=null&&s.id&&!s.isAdd)){i.next=6;break}return i.next=4,(0,l.cz)(m()(m()({},s),{},{name:w.name}));case 4:i.next=8;break;case 6:return i.next=8,(0,l.Eo)({name:w.name,parent_id:(s==null?void 0:s.id)||"",desc:"",owner:(c==null?void 0:c.user_id)||"",tenant:t.cm});case 8:a.yw.success("".concat(K,"\u6210\u529F")),W(),I(!1),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(0),console.log(i.t0);case 16:case"end":return i.stop()}},G,null,[[0,13]])}));return function(w){return v.apply(this,arguments)}}();return(0,r.jsx)(R.Y,m()(m()({title:"\u76EE\u5F55".concat(K)},n.I),{},{formRef:_,open:E,onFinish:function(){var v=h()(d()().mark(function G(w){return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:F(w);case 1:case"end":return i.stop()}},G)}));return function(G){return v.apply(this,arguments)}}(),modalProps:{onCancel:function(){I(!1)}},children:(0,r.jsx)(j.Z,{label:"\u76EE\u5F55\u540D\u79F0",name:"name",rules:[{required:!0}],fieldProps:{maxLength:16}})}))},V=k,N=e(86548),O=e(48689),H=e(78957),S=e(86738),p=function(D){var E=D.setAddCom,I=D.onSuccess,s=function(){var _=h()(d()().mark(function M(T){return d()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,(0,l.nI)({group_id:T.id});case 3:a.yw.success("\u5220\u9664\u6210\u529F"),I(),c.next=10;break;case 7:c.prev=7,c.t0=c.catch(0),console.log(c.t0);case 10:case"end":return c.stop()}},M,null,[[0,7]])}));return function(T){return _.apply(this,arguments)}}(),W=[{title:"\u540D\u79F0",dataIndex:"name",width:300,formItemProps:{label:"\u641C\u7D22"},fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",valueType:"dateTime",hideInSearch:!0,width:300},{title:"\u64CD\u4F5C",valueType:"option",key:"option",render:function(M,T){return[(0,r.jsxs)(H.Z,{size:0,children:[(0,r.jsx)(g.ZP,{type:"link",size:"small",icon:(0,r.jsx)(o.Z,{}),onClick:function(){return E(!0,{item:m()(m()({},T),{},{isAdd:!0})})},children:"\u6DFB\u52A0"},"add"),(0,r.jsx)(g.ZP,{type:"link",size:"small",icon:(0,r.jsx)(N.Z,{}),onClick:function(){return E(!0,{item:T})},children:"\u4FEE\u6539"}),(0,r.jsx)(S.Z,{title:"\u5220\u9664\u76EE\u5F55\u65F6\uFF0C\u628A\u8BE5\u76EE\u5F55\u4E0B \u8BBE\u5907\u53CA\u5B50\u76EE\u5F55\u5168\u90E8\u5220\u9664\uFF0C \u786E\u5B9A\u8981\u5220\u9664\u5417?",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onConfirm:function(){return s(T)},children:(0,r.jsx)(g.ZP,{size:"small",type:"link",danger:!0,icon:(0,r.jsx)(O.Z,{}),children:"\u5220\u9664"})})]})]}}];return{columns:W}},X=p,q=e(68296),ee=function(){var D,E=(0,P.useRef)(),I=(0,q.Em)(),s=A()(I,2),W=s[0],_=s[1],M=function(){E.current&&E.current.reload()},T=X({setAddCom:_,onSuccess:M}),Z=T.columns,c=function(){var K=h()(d()().mark(function Y(F){var v,G;return d()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,f.next=3,(0,l.lB)({name:F.name||"",parent_id:"",tenant:t.cm,is_desc:!0,size:F.pageSize,page:F.current});case 3:return v=f.sent,G=function i(ne){ne.forEach(function($){$.sub_groups&&$.sub_groups.length!==0?($.children=$.sub_groups,i($.sub_groups)):$.children=void 0})},G(v.group_list),f.abrupt("return",{success:!0,data:v.group_list,total:v.total});case 9:return f.prev=9,f.t0=f.catch(0),f.abrupt("return",{success:!1});case 12:case"end":return f.stop()}},Y,null,[[0,9]])}));return function(F){return K.apply(this,arguments)}}();return(0,r.jsxs)("div",{children:[(0,r.jsx)(U.Z,{actionRef:E,rowKey:"id",scroll:{x:"max-content"},search:{labelWidth:80,optionRender:function(Y,F,v){return[].concat(u()(v),[(0,r.jsxs)(g.ZP,{type:"primary",onClick:function(){return _(!0)},children:[(0,r.jsx)(o.Z,{})," \u6DFB\u52A0"]},"add")])}},request:c,columns:Z}),(0,r.jsx)(V,{visible:W.visible,item:(D=W.param)===null||D===void 0?void 0:D.item,onSuccess:M,onCancel:_})]})},re=ee},21074:function(J,b,e){e.d(b,{Eo:function(){return m},cz:function(){return R},kh:function(){return o},lB:function(){return g},nI:function(){return A}});var B=e(15009),u=e.n(B),L=e(97857),d=e.n(L),z=e(99289),h=e.n(z),y=e(53424);function A(a,n){return P.apply(this,arguments)}function P(){return P=h()(u()().mark(function a(n,t){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,y.request)("/rpc/air-view-srv/DeviceGroup.DeleteGroup",d()({method:"POST",headers:{"Content-Type":"application/json"},data:n},t||{})));case 1:case"end":return r.stop()}},a)})),P.apply(this,arguments)}(function(a){var n=a.apiUrl="/rpc/air-view-srv/DeviceGroup.DeleteGroup"})(A||(A={}));function o(a,n){return U.apply(this,arguments)}function U(){return U=h()(u()().mark(function a(n,t){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,y.request)("/rpc/air-view-srv/DeviceGroup.ListAllGroup",d()({method:"POST",headers:{"Content-Type":"application/json"},data:n},t||{})));case 1:case"end":return r.stop()}},a)})),U.apply(this,arguments)}(function(a){var n=a.apiUrl="/rpc/air-view-srv/DeviceGroup.ListAllGroup"})(o||(o={}));function g(a,n){return C.apply(this,arguments)}function C(){return C=h()(u()().mark(function a(n,t){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,y.request)("/rpc/air-view-srv/DeviceGroup.ListGroup",d()({method:"POST",headers:{"Content-Type":"application/json"},data:n},t||{})));case 1:case"end":return r.stop()}},a)})),C.apply(this,arguments)}(function(a){var n=a.apiUrl="/rpc/air-view-srv/DeviceGroup.ListGroup"})(g||(g={}));function m(a,n){return x.apply(this,arguments)}function x(){return x=h()(u()().mark(function a(n,t){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,y.request)("/rpc/air-view-srv/DeviceGroup.SetGroup",d()({method:"POST",headers:{"Content-Type":"application/json"},data:n},t||{})));case 1:case"end":return r.stop()}},a)})),x.apply(this,arguments)}(function(a){var n=a.apiUrl="/rpc/air-view-srv/DeviceGroup.SetGroup"})(m||(m={}));function R(a,n){return j.apply(this,arguments)}function j(){return j=h()(u()().mark(function a(n,t){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,y.request)("/rpc/air-view-srv/DeviceGroup.UpdateGroup",d()({method:"POST",headers:{"Content-Type":"application/json"},data:n},t||{})));case 1:case"end":return r.stop()}},a)})),j.apply(this,arguments)}(function(a){var n=a.apiUrl="/rpc/air-view-srv/DeviceGroup.UpdateGroup"})(R||(R={}))}}]);
