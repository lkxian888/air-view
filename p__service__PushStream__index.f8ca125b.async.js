"use strict";(self.webpackChunkairview=self.webpackChunkairview||[]).push([[828],{64317:function(pt,xe,s){var le=s(1413),Q=s(91),Ee=s(22270),d=s(67294),Ae=s(66758),O=s(30798),$e=s(85893),he=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],l=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],q=function(U,me){var fe=U.fieldProps,x=U.children,p=U.params,Y=U.proFieldProps,k=U.mode,oe=U.valueEnum,ie=U.request,ce=U.showSearch,J=U.options,ge=(0,Q.Z)(U,he),ue=(0,d.useContext)(Ae.Z);return(0,$e.jsx)(O.Z,(0,le.Z)((0,le.Z)({valueEnum:(0,Ee.h)(oe),request:ie,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,le.Z)({options:J,mode:k,showSearch:ce,getPopupContainer:ue.getPopupContainer},fe),ref:me,proFieldProps:Y},ge),{},{children:x}))},Le=d.forwardRef(function(X,U){var me=X.fieldProps,fe=X.children,x=X.params,p=X.proFieldProps,Y=X.mode,k=X.valueEnum,oe=X.request,ie=X.options,ce=(0,Q.Z)(X,l),J=(0,le.Z)({options:ie,mode:Y||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},me),ge=(0,d.useContext)(Ae.Z);return(0,$e.jsx)(O.Z,(0,le.Z)((0,le.Z)({valueEnum:(0,Ee.h)(k),request:oe,params:x,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,le.Z)({getPopupContainer:ge.getPopupContainer},J),ref:U,proFieldProps:p},ce),{},{children:fe}))}),ve=d.forwardRef(q),ye=Le,M=ve;M.SearchSelect=ye,M.displayName="ProFormComponent",xe.Z=M},5966:function(pt,xe,s){var le=s(97685),Q=s(1413),Ee=s(91),d=s(21770),Ae=s(23323),O=s(55241),$e=s(97435),he=s(67294),l=s(30798),q=s(85893),Le=["fieldProps","proFieldProps"],ve=["fieldProps","proFieldProps"],ye="text",M=function(x){var p=x.fieldProps,Y=x.proFieldProps,k=(0,Ee.Z)(x,Le);return(0,q.jsx)(l.Z,(0,Q.Z)({valueType:ye,fieldProps:p,filedConfig:{valueType:ye},proFieldProps:Y},k))},X=function(x){var p=(0,d.Z)(x.open||!1,{value:x.open,onChange:x.onOpenChange}),Y=(0,le.Z)(p,2),k=Y[0],oe=Y[1];return(0,q.jsx)(Ae.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(ce){var J,ge=ce.getFieldValue(x.name||[]);return(0,q.jsx)(O.Z,(0,Q.Z)((0,Q.Z)({getPopupContainer:function(B){return B&&B.parentNode?B.parentNode:B},onOpenChange:function(B){return oe(B)},content:(0,q.jsxs)("div",{style:{padding:"4px 0"},children:[(J=x.statusRender)===null||J===void 0?void 0:J.call(x,ge),x.strengthText?(0,q.jsx)("div",{style:{marginTop:10},children:(0,q.jsx)("span",{children:x.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},x.popoverProps),{},{open:k,children:x.children}))}})},U=function(x){var p=x.fieldProps,Y=x.proFieldProps,k=(0,Ee.Z)(x,ve),oe=(0,he.useState)(!1),ie=(0,le.Z)(oe,2),ce=ie[0],J=ie[1];return p!=null&&p.statusRender&&k.name?(0,q.jsx)(X,{name:k.name,statusRender:p==null?void 0:p.statusRender,popoverProps:p==null?void 0:p.popoverProps,strengthText:p==null?void 0:p.strengthText,open:ce,onOpenChange:J,children:(0,q.jsx)("div",{children:(0,q.jsx)(l.Z,(0,Q.Z)({valueType:"password",fieldProps:(0,Q.Z)((0,Q.Z)({},(0,$e.Z)(p,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(ue){var B;p==null||(B=p.onBlur)===null||B===void 0||B.call(p,ue),J(!1)},onClick:function(ue){var B;p==null||(B=p.onClick)===null||B===void 0||B.call(p,ue),J(!0)}}),proFieldProps:Y,filedConfig:{valueType:ye}},k))})}):(0,q.jsx)(l.Z,(0,Q.Z)({valueType:"password",fieldProps:p,proFieldProps:Y,filedConfig:{valueType:ye}},k))},me=M;me.Password=U,me.displayName="ProFormComponent",xe.Z=me},77387:function(pt,xe,s){s.r(xe),s.d(xe,{default:function(){return In}});var le=s(19632),Q=s.n(le),Ee=s(15009),d=s.n(Ee),Ae=s(99289),O=s.n(Ae),$e=s(5574),he=s.n($e),l=s(67294),q=s(24969),Le=s(25713),ve=s(14726),ye=s(97857),M=s.n(ye),X=s(37476),U=s(5966),me=s(64317),fe=s(59628),x=s(90199),p=s(53424);function Y(t,e){return k.apply(this,arguments)}function k(){return k=O()(d()().mark(function t(e,a){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/rpc/air-view-srv/PushManage.AddPush",M()({method:"POST",headers:{"Content-Type":"application/json"},data:e},a||{})));case 1:case"end":return n.stop()}},t)})),k.apply(this,arguments)}(function(t){var e=t.apiUrl="/rpc/air-view-srv/PushManage.AddPush"})(Y||(Y={}));function oe(t,e){return ie.apply(this,arguments)}function ie(){return ie=O()(d()().mark(function t(e,a){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/rpc/air-view-srv/PushManage.DelPush",M()({method:"POST",headers:{"Content-Type":"application/json"},data:e},a||{})));case 1:case"end":return n.stop()}},t)})),ie.apply(this,arguments)}(function(t){var e=t.apiUrl="/rpc/air-view-srv/PushManage.DelPush"})(oe||(oe={}));function ce(t,e){return J.apply(this,arguments)}function J(){return J=O()(d()().mark(function t(e,a){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/rpc/air-view-srv/PushManage.DiscoverPush",M()({method:"POST",headers:{"Content-Type":"application/json"},data:e},a||{})));case 1:case"end":return n.stop()}},t)})),J.apply(this,arguments)}(function(t){var e=t.apiUrl="/rpc/air-view-srv/PushManage.DiscoverPush"})(ce||(ce={}));function ge(t,e){return ue.apply(this,arguments)}function ue(){return ue=O()(d()().mark(function t(e,a){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/rpc/air-view-srv/PushManage.GetNetType",M()({method:"POST",headers:{"Content-Type":"application/json"},data:e},a||{})));case 1:case"end":return n.stop()}},t)})),ue.apply(this,arguments)}(function(t){var e=t.apiUrl="/rpc/air-view-srv/PushManage.GetNetType"})(ge||(ge={}));function B(t,e){return ze.apply(this,arguments)}function ze(){return ze=O()(d()().mark(function t(e,a){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/rpc/air-view-srv/PushManage.ListPush",M()({method:"POST",headers:{"Content-Type":"application/json"},data:e},a||{})));case 1:case"end":return n.stop()}},t)})),ze.apply(this,arguments)}(function(t){var e=t.apiUrl="/rpc/air-view-srv/PushManage.ListPush"})(B||(B={}));function ke(t,e){return He.apply(this,arguments)}function He(){return He=O()(d()().mark(function t(e,a){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/rpc/air-view-srv/PushManage.UpdatePush",M()({method:"POST",headers:{"Content-Type":"application/json"},data:e},a||{})));case 1:case"end":return n.stop()}},t)})),He.apply(this,arguments)}(function(t){var e=t.apiUrl="/rpc/air-view-srv/PushManage.UpdatePush"})(ke||(ke={}));var L=s(85893),Kt=function(e){var a=e.visible,r=e.onCancel,n=e.item,c=e.onSuccess,o=(0,l.useRef)(),m=(0,l.useState)([]),g=he()(m,2),f=g[0],b=g[1],P=function(){o.current&&o.current.resetFields()},Z=function(){var C=O()(d()().mark(function j(){var w;return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,ce({});case 3:w=u.sent,b(w.push_list.filter(function(D){return(n==null?void 0:n.id)||D.added!==1}).map(function(D){return{label:D.name,value:D.id}})),u.next=10;break;case 7:u.prev=7,u.t0=u.catch(0),console.log(u.t0);case 10:case"end":return u.stop()}},j,null,[[0,7]])}));return function(){return C.apply(this,arguments)}}();(0,l.useEffect)(function(){if(Z(),a){var C;(C=o.current)===null||C===void 0||C.setFieldsValue(M()({},n))}else P()},[a]);var E=function(){var C=O()(d()().mark(function j(w){return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(u.prev=0,n!=null&&n.id){u.next=6;break}return u.next=4,Y(M()({type:"PUSHSERVER"},w));case 4:u.next=8;break;case 6:return u.next=8,ke(w);case 8:fe.yw.success("".concat(n!=null&&n.id?"\u4FEE\u6539":"\u6DFB\u52A0","\u6210\u529F")),c(),r(!1),u.next=16;break;case 13:u.prev=13,u.t0=u.catch(0),console.log(u.t0);case 16:case"end":return u.stop()}},j,null,[[0,13]])}));return function(w){return C.apply(this,arguments)}}();return(0,L.jsxs)(X.Y,M()(M()({title:"".concat(n?"\u4FEE\u6539":"\u6DFB\u52A0")},x.I),{},{formRef:o,open:a,onFinish:function(){var C=O()(d()().mark(function j(w){return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:E(w);case 1:case"end":return u.stop()}},j)}));return function(j){return C.apply(this,arguments)}}(),modalProps:{onCancel:function(){r(!1)}},children:[(0,L.jsx)(U.Z,{label:"\u670D\u52A1\u540D\u79F0",name:"name",rules:[{required:!0,max:16}],fieldProps:{maxLength:16}}),(0,L.jsx)(me.Z,{rules:[{required:!0}],options:f,name:"id",fieldProps:{showSearch:!0,disabled:!!(n!=null&&n.id)},label:"\u5730\u5740"}),(0,L.jsx)(U.Z,{label:"\u670D\u52A1\u5668\u5730\u5740",name:"server",placeholder:"\u4F8B\uFF1A192.168.0.20:8080",rules:[{required:!0}]}),(0,L.jsx)(me.Z,{rules:[{required:!0}],valueEnum:{NETLAN:"\u5185\u7F51",NETWAN:"\u5916\u7F51"},name:"net",fieldProps:{showSearch:!0,disabled:!!(n!=null&&n.id)},label:"\u7F51\u7EDC\u7C7B\u578B"}),(0,L.jsx)(U.Z,{label:"\u5907\u6CE8",name:"desc"})]}))},Ut=Kt,Re=s(74902),Bt=s(93967),Ze=s.n(Bt),ht=s(25132),vt=s(9708);const Ne=t=>{const e=new Map;return t.forEach((a,r)=>{e.set(a,r)}),e},Nt=t=>{const e=new Map;return t.forEach((a,r)=>{let{disabled:n,key:c}=a;n&&e.set(c,r)}),e};var Wt=s(53124),Vt=s(88258),zt=s(65223),mt=s(10110),ft=s(24457),kt=(t,e,a)=>{const r=l.useMemo(()=>(t||[]).map(o=>(e&&(o=Object.assign(Object.assign({},o),{key:e(o)})),o)),[t,e]),[n,c]=l.useMemo(()=>{const o=[],m=new Array((a||[]).length),g=Ne(a||[]);return r.forEach(f=>{g.has(f.key)?m[g.get(f.key)]=f:o.push(f)}),[o,m]},[r,a,e]);return[r,n,c]};const Ht=[];function Oe(t,e){const a=t.filter(r=>e.has(r));return t.length===a.length?t:a}function gt(t){return Array.from(t).join(";")}function Gt(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ht;const[r,n]=l.useMemo(()=>[new Set(t.map(f=>f.key)),new Set(e.map(f=>f.key))],[t,e]),[c,o]=l.useState(()=>Oe(a,r)),[m,g]=l.useState(()=>Oe(a,n));return l.useEffect(()=>{o(Oe(a,r)),g(Oe(a,n))},[a]),l.useEffect(()=>{o(Oe(c,r)),g(Oe(m,n))},[gt(r),gt(n)]),[c,m,o,g]}var Xt=s(80882),Yt=s(98423),Pt=s(84567),Jt=s(85418),Qt=s(21770),qt=s(24383),St=s(48689),_t=s(34952);const en=t=>{const{renderedText:e,renderedEl:a,item:r,checked:n,disabled:c,prefixCls:o,onClick:m,onRemove:g,showRemove:f}=t,b=Ze()(`${o}-content-item`,{[`${o}-content-item-disabled`]:c||r.disabled,[`${o}-content-item-checked`]:n});let P;(typeof e=="string"||typeof e=="number")&&(P=String(e));const[Z]=(0,mt.Z)("Transfer",ft.Z.Transfer),E={className:b,title:P},C=l.createElement("span",{className:`${o}-content-item-text`},a);return f?l.createElement("li",Object.assign({},E),C,l.createElement(_t.Z,{disabled:c||r.disabled,className:`${o}-content-item-remove`,"aria-label":Z==null?void 0:Z.remove,onClick:()=>{g==null||g(r)}},l.createElement(St.Z,null))):(E.onClick=c||r.disabled?void 0:j=>m(r,j),l.createElement("li",Object.assign({},E),l.createElement(Pt.Z,{className:`${o}-checkbox`,checked:n,disabled:c||r.disabled}),C))};var tn=l.memo(en);const nn=["handleFilter","handleClear","checkedKeys"],rn=t=>Object.assign(Object.assign({},{simple:!0,showSizeChanger:!1,showLessItems:!1}),t),an=(t,e)=>{const{prefixCls:a,filteredRenderItems:r,selectedKeys:n,disabled:c,showRemove:o,pagination:m,onScroll:g,onItemSelect:f,onItemRemove:b}=t,[P,Z]=l.useState(1),E=l.useMemo(()=>m?rn(typeof m=="object"?m:{}):null,[m]),[C,j]=(0,Qt.Z)(10,{value:E==null?void 0:E.pageSize});l.useEffect(()=>{if(E){const S=Math.ceil(r.length/C);Z(Math.min(P,S))}},[r,E,C]);const w=(S,A)=>{f(S.key,!n.includes(S.key),A)},F=S=>{b==null||b([S.key])},u=S=>{Z(S)},D=(S,A)=>{Z(S),j(A)},H=l.useMemo(()=>E?r.slice((P-1)*C,P*C):r,[P,r,E,C]);l.useImperativeHandle(e,()=>({items:H}));const R=E?l.createElement(qt.Z,{size:"small",disabled:c,simple:E.simple,pageSize:C,showLessItems:E.showLessItems,showSizeChanger:E.showSizeChanger,className:`${a}-pagination`,total:r.length,current:P,onChange:u,onShowSizeChange:D}):null,K=Ze()(`${a}-content`,{[`${a}-content-show-remove`]:o});return l.createElement(l.Fragment,null,l.createElement("ul",{className:K,onScroll:g},(H||[]).map(S=>{let{renderedEl:A,renderedText:V,item:T}=S;return l.createElement(tn,{key:T.key,item:T,renderedText:V,renderedEl:A,prefixCls:a,showRemove:o,onClick:w,onRemove:F,checked:n.includes(T.key),disabled:c||T.disabled})})),R)};var ln=l.forwardRef(an),sn=s(68795),on=s(25278),yt=t=>{const{placeholder:e="",value:a,prefixCls:r,disabled:n,onChange:c,handleClear:o}=t,m=l.useCallback(g=>{c==null||c(g),g.target.value===""&&(o==null||o())},[c]);return l.createElement(on.Z,{placeholder:e,className:r,value:a,onChange:m,disabled:n,allowClear:!0,prefix:l.createElement(sn.Z,null)})};const cn=()=>null;function un(t){return!!(t&&!l.isValidElement(t)&&Object.prototype.toString.call(t)==="[object Object]")}function Fe(t){return t.filter(e=>!e.disabled).map(e=>e.key)}const dn=t=>t!==void 0;var Ge=t=>{const{prefixCls:e,dataSource:a=[],titleText:r="",checkedKeys:n,disabled:c,showSearch:o=!1,style:m,searchPlaceholder:g,notFoundContent:f,selectAll:b,deselectAll:P,selectCurrent:Z,selectInvert:E,removeAll:C,removeCurrent:j,showSelectAll:w=!0,showRemove:F,pagination:u,direction:D,itemsUnit:H,itemUnit:R,selectAllLabel:K,selectionsIcon:S,footer:A,renderList:V,onItemSelectAll:T,onItemRemove:z,handleFilter:N,handleClear:Pe,filterOption:G,render:_=cn}=t,[de,se]=(0,l.useState)(""),ee=(0,l.useRef)({}),nt=h=>{se(h.target.value),N(h)},rt=()=>{se(""),Pe()},at=(h,y)=>G?G(de,y,D):h.includes(de),lt=h=>{let y=V?V(Object.assign(Object.assign({},h),{onItemSelect:(te,Se)=>h.onItemSelect(te,Se)})):null;const I=!!y;return I||(y=l.createElement(ln,Object.assign({ref:ee},h))),{customize:I,bodyContent:y}},Ke=h=>{const y=_(h),I=un(y);return{item:h,renderedEl:I?y.label:y,renderedText:I?y.value:y}},we=(0,l.useMemo)(()=>Array.isArray(f)?f[D==="left"?0:1]:f,[f,D]),[W,pe]=(0,l.useMemo)(()=>{const h=[],y=[];return a.forEach(I=>{const te=Ke(I);de&&!at(te.renderedText,I)||(h.push(I),y.push(te))}),[h,y]},[a,de]),Ie=(0,l.useMemo)(()=>{if(n.length===0)return"none";const h=Ne(n);return W.every(y=>h.has(y.key)||!!y.disabled)?"all":"part"},[n,W]),st=(0,l.useMemo)(()=>{const h=o?l.createElement("div",{className:`${e}-body-search-wrapper`},l.createElement(yt,{prefixCls:`${e}-search`,onChange:nt,handleClear:rt,placeholder:g,value:de,disabled:c})):null,{customize:y,bodyContent:I}=lt(Object.assign(Object.assign({},(0,Yt.Z)(t,nn)),{filteredItems:W,filteredRenderItems:pe,selectedKeys:n}));let te;return y?te=l.createElement("div",{className:`${e}-body-customize-wrapper`},I):te=W.length?I:l.createElement("div",{className:`${e}-body-not-found`},we),l.createElement("div",{className:Ze()(o?`${e}-body ${e}-body-with-search`:`${e}-body`)},h,te)},[o,e,g,de,c,n,W,pe,we]),ot=l.createElement(Pt.Z,{disabled:a.length===0||c,checked:Ie==="all",indeterminate:Ie==="part",className:`${e}-checkbox`,onChange:()=>{T==null||T(W.filter(h=>!h.disabled).map(h=>{let{key:y}=h;return y}),Ie!=="all")}}),it=(h,y)=>{if(K)return typeof K=="function"?K({selectedCount:h,totalCount:y}):K;const I=y>1?H:R;return l.createElement(l.Fragment,null,(h>0?`${h}/`:"")+y," ",I)},Ue=A&&(A.length<2?A(t):A(t,{direction:D})),ct=Ze()(e,{[`${e}-with-pagination`]:!!u,[`${e}-with-footer`]:!!Ue}),je=Ue?l.createElement("div",{className:`${e}-footer`},Ue):null,Te=!F&&!u&&ot;let Me;F?Me=[u?{key:"removeCurrent",label:j,onClick(){var h;const y=Fe((((h=ee.current)===null||h===void 0?void 0:h.items)||[]).map(I=>I.item));z==null||z(y)}}:null,{key:"removeAll",label:C,onClick(){z==null||z(Fe(W))}}].filter(Boolean):Me=[{key:"selectAll",label:Ie==="all"?P:b,onClick(){const h=Fe(W);T==null||T(h,h.length!==n.length)}},u?{key:"selectCurrent",label:Z,onClick(){var h;const y=((h=ee.current)===null||h===void 0?void 0:h.items)||[];T==null||T(Fe(y.map(I=>I.item)),!0)}}:null,{key:"selectInvert",label:E,onClick(){var h;const y=Fe((((h=ee.current)===null||h===void 0?void 0:h.items)||[]).map(Se=>Se.item)),I=new Set(n),te=new Set(I);y.forEach(Se=>{I.has(Se)?te.delete(Se):te.add(Se)}),T==null||T(Array.from(te),"replace")}}];const ut=l.createElement(Jt.Z,{className:`${e}-header-dropdown`,menu:{items:Me},disabled:c},dn(S)?S:l.createElement(Xt.Z,null));return l.createElement("div",{className:ct,style:m},l.createElement("div",{className:`${e}-header`},w?l.createElement(l.Fragment,null,Te,ut):null,l.createElement("span",{className:`${e}-header-selected`},it(n.length,W.length)),l.createElement("span",{className:`${e}-header-title`},r)),st,je)},Ct=s(6171),bt=s(90814),Et=t=>{const{disabled:e,moveToLeft:a,moveToRight:r,leftArrowText:n="",rightArrowText:c="",leftActive:o,rightActive:m,className:g,style:f,direction:b,oneWay:P}=t;return l.createElement("div",{className:g,style:f},l.createElement(ve.ZP,{type:"primary",size:"small",disabled:e||!m,onClick:r,icon:b!=="rtl"?l.createElement(bt.Z,null):l.createElement(Ct.Z,null)},c),!P&&l.createElement(ve.ZP,{type:"primary",size:"small",disabled:e||!o,onClick:a,icon:b!=="rtl"?l.createElement(Ct.Z,null):l.createElement(bt.Z,null)},n))},ne=s(44182),We=s(14747),pn=s(27036),hn=s(45503);const vn=t=>{const{antCls:e,componentCls:a,listHeight:r,controlHeightLG:n}=t,c=`${e}-table`,o=`${e}-input`;return{[`${a}-customize-list`]:{[`${a}-list`]:{flex:"1 1 50%",width:"auto",height:"auto",minHeight:r},[`${c}-wrapper`]:{[`${c}-small`]:{border:0,borderRadius:0,[`${c}-selection-column`]:{width:n,minWidth:n}},[`${c}-pagination${c}-pagination`]:{margin:0,padding:t.paddingXS}},[`${o}[disabled]`]:{backgroundColor:"transparent"}}}},Tt=(t,e)=>{const{componentCls:a,colorBorder:r}=t;return{[`${a}-list`]:{borderColor:e,"&-search:not([disabled])":{borderColor:r}}}},mn=t=>{const{componentCls:e}=t;return{[`${e}-status-error`]:Object.assign({},Tt(t,t.colorError)),[`${e}-status-warning`]:Object.assign({},Tt(t,t.colorWarning))}},fn=t=>{const{componentCls:e,colorBorder:a,colorSplit:r,lineWidth:n,itemHeight:c,headerHeight:o,transferHeaderVerticalPadding:m,itemPaddingBlock:g,controlItemBgActive:f,colorTextDisabled:b,listHeight:P,listWidth:Z,listWidthLG:E,fontSizeIcon:C,marginXS:j,paddingSM:w,lineType:F,antCls:u,iconCls:D,motionDurationSlow:H,controlItemBgHover:R,borderRadiusLG:K,colorBgContainer:S,colorText:A,controlItemBgActiveHover:V}=t;return{display:"flex",flexDirection:"column",width:Z,height:P,border:`${(0,ne.bf)(n)} ${F} ${a}`,borderRadius:t.borderRadiusLG,"&-with-pagination":{width:E,height:"auto"},"&-search":{[`${D}-search`]:{color:b}},"&-header":{display:"flex",flex:"none",alignItems:"center",height:o,padding:`${(0,ne.bf)(t.calc(m).sub(n).equal())} ${(0,ne.bf)(w)} ${(0,ne.bf)(m)}`,color:A,background:S,borderBottom:`${(0,ne.bf)(n)} ${F} ${r}`,borderRadius:`${(0,ne.bf)(K)} ${(0,ne.bf)(K)} 0 0`,"> *:not(:last-child)":{marginInlineEnd:4},"> *":{flex:"none"},"&-title":Object.assign(Object.assign({},We.vS),{flex:"auto",textAlign:"end"}),"&-dropdown":Object.assign(Object.assign({},(0,We.Ro)()),{fontSize:C,transform:"translateY(10%)",cursor:"pointer","&[disabled]":{cursor:"not-allowed"}})},"&-body":{display:"flex",flex:"auto",flexDirection:"column",fontSize:t.fontSize,minHeight:0,"&-search-wrapper":{position:"relative",flex:"none",padding:w}},"&-content":{flex:"auto",margin:0,padding:0,overflow:"auto",listStyle:"none","&-item":{display:"flex",alignItems:"center",minHeight:c,padding:`${(0,ne.bf)(g)} ${(0,ne.bf)(w)}`,transition:`all ${H}`,"> *:not(:last-child)":{marginInlineEnd:j},"> *":{flex:"none"},"&-text":Object.assign(Object.assign({},We.vS),{flex:"auto"}),"&-remove":{position:"relative",color:a,cursor:"pointer",transition:`all ${H}`,"&:hover":{color:t.colorLinkHover},"&::after":{position:"absolute",inset:`-${(0,ne.bf)(g)} -50%`,content:'""'}},[`&:not(${e}-list-content-item-disabled)`]:{"&:hover":{backgroundColor:R,cursor:"pointer"},[`&${e}-list-content-item-checked:hover`]:{backgroundColor:V}},"&-checked":{backgroundColor:f},"&-disabled":{color:b,cursor:"not-allowed"}},[`&-show-remove ${e}-list-content-item:not(${e}-list-content-item-disabled):hover`]:{background:"transparent",cursor:"default"}},"&-pagination":{padding:t.paddingXS,textAlign:"end",borderTop:`${(0,ne.bf)(n)} ${F} ${r}`,[`${u}-pagination-options`]:{paddingInlineEnd:t.paddingXS}},"&-body-not-found":{flex:"none",width:"100%",margin:"auto 0",color:b,textAlign:"center"},"&-footer":{borderTop:`${(0,ne.bf)(n)} ${F} ${r}`},"&-checkbox":{lineHeight:1}}},gn=t=>{const{antCls:e,iconCls:a,componentCls:r,marginXS:n,marginXXS:c,fontSizeIcon:o,colorBgContainerDisabled:m}=t;return{[r]:Object.assign(Object.assign({},(0,We.Wf)(t)),{position:"relative",display:"flex",alignItems:"stretch",[`${r}-disabled`]:{[`${r}-list`]:{background:m}},[`${r}-list`]:fn(t),[`${r}-operation`]:{display:"flex",flex:"none",flexDirection:"column",alignSelf:"center",margin:`0 ${(0,ne.bf)(n)}`,verticalAlign:"middle",gap:c,[`${e}-btn ${a}`]:{fontSize:o}}})}},Pn=t=>{const{componentCls:e}=t;return{[`${e}-rtl`]:{direction:"rtl"}}},Sn=t=>{const{fontSize:e,lineHeight:a,controlHeight:r,controlHeightLG:n,lineWidth:c}=t,o=Math.round(e*a);return{listWidth:180,listHeight:200,listWidthLG:250,headerHeight:n,itemHeight:r,itemPaddingBlock:(r-o)/2,transferHeaderVerticalPadding:Math.ceil((n-c-o)/2)}};var yn=(0,pn.I$)("Transfer",t=>{const e=(0,hn.TS)(t);return[gn(e),vn(e),mn(e),Pn(e)]},Sn);const Ve=t=>{const{dataSource:e,targetKeys:a=[],selectedKeys:r,selectAllLabels:n=[],operations:c=[],style:o={},listStyle:m={},locale:g={},titles:f,disabled:b,showSearch:P=!1,operationStyle:Z,showSelectAll:E,oneWay:C,pagination:j,status:w,prefixCls:F,className:u,rootClassName:D,selectionsIcon:H,filterOption:R,render:K,footer:S,children:A,rowKey:V,onScroll:T,onChange:z,onSearch:N,onSelectChange:Pe}=t,{getPrefixCls:G,renderEmpty:_,direction:de,transfer:se}=(0,l.useContext)(Wt.E_),ee=G("transfer",F),[nt,rt,at]=yn(ee),[lt,Ke,we]=kt(e,V,a),[W,pe,Ie,st]=Gt(Ke,we,r),[ot,it]=(0,ht.Z)(i=>i.key),[Ue,ct]=(0,ht.Z)(i=>i.key),je=(0,l.useCallback)((i,v)=>{if(i==="left"){const $=typeof v=="function"?v(W||[]):v;Ie($)}else{const $=typeof v=="function"?v(pe||[]):v;st($)}},[W,pe]),Te=(i,v)=>{(i==="left"?it:ct)(v)},Me=(0,l.useCallback)((i,v)=>{i==="left"?Pe==null||Pe(v,pe):Pe==null||Pe(W,v)},[W,pe]),ut=i=>{var v;return(v=f!=null?f:i.titles)!==null&&v!==void 0?v:[]},h=i=>{T==null||T("left",i)},y=i=>{T==null||T("right",i)},I=i=>{const v=i==="right"?W:pe,$=Nt(lt),re=v.filter(De=>!$.has(De)),ae=Ne(re),Ce=i==="right"?re.concat(a):a.filter(De=>!ae.has(De)),be=i==="right"?"left":"right";je(be,[]),Me(be,[]),z==null||z(Ce,i,re)},te=()=>{I("left"),Te("left",null)},Se=()=>{I("right"),Te("right",null)},It=(i,v,$)=>{je(i,re=>{let ae=[];if($==="replace")ae=v;else if($)ae=Array.from(new Set([].concat((0,Re.Z)(re),(0,Re.Z)(v))));else{const Ce=Ne(v);ae=re.filter(be=>!Ce.has(be))}return Me(i,ae),ae}),Te(i,null)},jn=(i,v)=>{It("left",i,v)},Dn=(i,v)=>{It("right",i,v)},Ln=i=>N==null?void 0:N("left",i.target.value),Rn=i=>N==null?void 0:N("right",i.target.value),Zn=()=>N==null?void 0:N("left",""),Fn=()=>N==null?void 0:N("right",""),Kn=(i,v,$,re,ae)=>{v.has($)&&(v.delete($),Te(i,null)),re&&(v.add($),Te(i,ae))},Un=(i,v,$,re)=>{(i==="left"?ot:Ue)(re,v,$)},jt=(i,v,$,re)=>{const ae=i==="left",Ce=(0,Re.Z)(ae?W:pe),be=new Set(Ce),De=(0,Re.Z)(ae?Ke:we).filter(Be=>!(Be!=null&&Be.disabled)),Zt=De.findIndex(Be=>Be.key===v);re&&Ce.length>0?Un(i,De,be,Zt):Kn(i,be,v,$,Zt);const Ft=Array.from(be);Me(i,Ft),t.selectedKeys||je(i,Ft)},Bn=(i,v,$)=>{jt("left",i,v,$==null?void 0:$.shiftKey)},Nn=(i,v,$)=>{jt("right",i,v,$==null?void 0:$.shiftKey)},Wn=i=>{je("right",[]),z==null||z(a.filter(v=>!i.includes(v)),"left",(0,Re.Z)(i))},Dt=i=>typeof m=="function"?m({direction:i}):m||{},Vn=(0,l.useContext)(zt.aM),{hasFeedback:zn,status:kn}=Vn,Hn=i=>Object.assign(Object.assign(Object.assign({},i),{notFoundContent:(_==null?void 0:_("Transfer"))||l.createElement(Vt.Z,{componentName:"Transfer"})}),g),Gn=(0,vt.F)(kn,w),Lt=!A&&j,Xn=pe.length>0,Yn=W.length>0,Jn=Ze()(ee,{[`${ee}-disabled`]:b,[`${ee}-customize-list`]:!!A,[`${ee}-rtl`]:de==="rtl"},(0,vt.Z)(ee,Gn,zn),se==null?void 0:se.className,u,D,rt,at),[Qn]=(0,mt.Z)("Transfer",ft.Z.Transfer),dt=Hn(Qn),[qn,_n]=ut(dt),Rt=H!=null?H:se==null?void 0:se.selectionsIcon;return nt(l.createElement("div",{className:Jn,style:Object.assign(Object.assign({},se==null?void 0:se.style),o)},l.createElement(Ge,Object.assign({prefixCls:`${ee}-list`,titleText:qn,dataSource:Ke,filterOption:R,style:Dt("left"),checkedKeys:W,handleFilter:Ln,handleClear:Zn,onItemSelect:Bn,onItemSelectAll:jn,render:K,showSearch:P,renderList:A,footer:S,onScroll:h,disabled:b,direction:de==="rtl"?"right":"left",showSelectAll:E,selectAllLabel:n[0],pagination:Lt,selectionsIcon:Rt},dt)),l.createElement(Et,{className:`${ee}-operation`,rightActive:Yn,rightArrowText:c[0],moveToRight:Se,leftActive:Xn,leftArrowText:c[1],moveToLeft:te,style:Z,disabled:b,direction:de,oneWay:C}),l.createElement(Ge,Object.assign({prefixCls:`${ee}-list`,titleText:_n,dataSource:we,filterOption:R,style:Dt("right"),checkedKeys:pe,handleFilter:Rn,handleClear:Fn,onItemSelect:Nn,onItemSelectAll:Dn,onItemRemove:Wn,render:K,showSearch:P,renderList:A,footer:S,onScroll:y,disabled:b,direction:de==="rtl"?"left":"right",showSelectAll:E,selectAllLabel:n[1],showRemove:C,pagination:Lt,selectionsIcon:Rt},dt))))};Ve.List=Ge,Ve.Search=yt,Ve.Operation=Et;var Cn=Ve,Mt=s(36493);function xt(t,e){return Xe.apply(this,arguments)}function Xe(){return Xe=O()(d()().mark(function t(e,a){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/rpc/air-view-srv/PullManage.AddVideo",M()({method:"POST",headers:{"Content-Type":"application/json"},data:e},a||{})));case 1:case"end":return n.stop()}},t)})),Xe.apply(this,arguments)}(function(t){var e=t.apiUrl="/rpc/air-view-srv/PullManage.AddVideo"})(xt||(xt={}));function At(t,e){return Ye.apply(this,arguments)}function Ye(){return Ye=O()(d()().mark(function t(e,a){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/rpc/air-view-srv/PullManage.DelVideo",M()({method:"POST",headers:{"Content-Type":"application/json"},data:e},a||{})));case 1:case"end":return n.stop()}},t)})),Ye.apply(this,arguments)}(function(t){var e=t.apiUrl="/rpc/air-view-srv/PullManage.DelVideo"})(At||(At={}));function $t(t,e){return Je.apply(this,arguments)}function Je(){return Je=O()(d()().mark(function t(e,a){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/rpc/air-view-srv/PullManage.GetMediaServerAddr",M()({method:"POST",headers:{"Content-Type":"application/json"},data:e},a||{})));case 1:case"end":return n.stop()}},t)})),Je.apply(this,arguments)}(function(t){var e=t.apiUrl="/rpc/air-view-srv/PullManage.GetMediaServerAddr"})($t||($t={}));function Qe(t,e){return qe.apply(this,arguments)}function qe(){return qe=O()(d()().mark(function t(e,a){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/rpc/air-view-srv/PullManage.ListVideo",M()({method:"POST",headers:{"Content-Type":"application/json"},data:e},a||{})));case 1:case"end":return n.stop()}},t)})),qe.apply(this,arguments)}(function(t){var e=t.apiUrl="/rpc/air-view-srv/PullManage.ListVideo"})(Qe||(Qe={}));function _e(t,e){return et.apply(this,arguments)}function et(){return et=O()(d()().mark(function t(e,a){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/rpc/air-view-srv/PullManage.UpdateVideo",M()({method:"POST",headers:{"Content-Type":"application/json"},data:e},a||{})));case 1:case"end":return n.stop()}},t)})),et.apply(this,arguments)}(function(t){var e=t.apiUrl="/rpc/air-view-srv/PullManage.UpdateVideo"})(_e||(_e={}));function Ot(t,e){return tt.apply(this,arguments)}function tt(){return tt=O()(d()().mark(function t(e,a){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/rpc/air-view-srv/PullManage.Watch",M()({method:"POST",headers:{"Content-Type":"application/json"},data:e},a||{})));case 1:case"end":return n.stop()}},t)})),tt.apply(this,arguments)}(function(t){var e=t.apiUrl="/rpc/air-view-srv/PullManage.Watch"})(Ot||(Ot={}));var bn=function(e){var a=e.visible,r=e.item,n=e.onCancel,c=(0,l.useRef)(),o=(0,l.useState)([]),m=he()(o,2),g=m[0],f=m[1],b=(0,l.useState)(["1","2"]),P=he()(b,2),Z=P[0],E=P[1],C=(0,l.useState)([]),j=he()(C,2),w=j[0],F=j[1],u=function(S){return E(S)},D=function(S,A){return F([].concat(Q()(S),Q()(A)))},H=function(){var K=O()(d()().mark(function S(){var A,V,T,z,N=arguments;return d()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return A=N.length>0&&N[0]!==void 0?N[0]:"",V={device_name:"",device_type:"RTSP",is_desc:!0,net:A&&(r==null?void 0:r.net)||"",size:999,page:1,push_id:A,device_group:"",tenant:Mt.cm,parent_id:"",sn:""},G.prev=2,G.next=5,Qe(V);case 5:T=G.sent,z=T.device_list.map(function(_){return M()(M()({},_),{},{key:_.sn})}),A?E(z.map(function(_){return _.key})):f(z.filter(function(_){return _.tags[r.net]&&_.tags[r.net]===(r==null?void 0:r.id)||!_.tags[r.net]})),G.next=13;break;case 10:G.prev=10,G.t0=G.catch(2),console.log(G.t0);case 13:case"end":return G.stop()}},S,null,[[2,10]])}));return function(){return K.apply(this,arguments)}}();(0,l.useEffect)(function(){if(!a)return F([]);H(),H(r==null?void 0:r.id)},[a]);var R=function(){var K=O()(d()().mark(function S(){return d()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!(r!=null&&r.id)){V.next=3;break}return V.next=3,_e({sn:Z,push_id:r.id,tenant:Mt.cm});case 3:fe.yw.success("".concat(r!=null&&r.id?"\u4FEE\u6539":"\u6DFB\u52A0","\u6210\u529F")),n(!1);case 5:case"end":return V.stop()}},S)}));return function(){return K.apply(this,arguments)}}();return(0,L.jsx)(X.Y,M()(M()({title:"\u670D\u52A1\u914D\u7F6E"},x.I),{},{formRef:c,open:a,onFinish:R,modalProps:{destroyOnClose:!0,onCancel:function(){n(!1)}},children:(0,L.jsx)(Cn,{dataSource:g,titles:["\u53EF\u9009\u8BBE\u5907\u5217\u8868","\u63A8\u6D41\u8BBE\u5907\u5217\u8868"],targetKeys:Z,selectedKeys:w,onChange:u,onSelectChange:D,render:function(S){return"".concat(S.name," (").concat(S.sn,")")},listStyle:{width:300,height:350}})}))},En=bn,Tn=s(42952),Mn=s(86548),xn=s(78957),An=s(86738),$n=function(e){var a=e.onSuccess,r=e.setAddCom,n=e.setConfigurationCom,c=function(){var m=O()(d()().mark(function g(f){return d()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.prev=0,P.next=3,oe({id:f.id});case 3:fe.yw.success("\u5220\u9664\u6210\u529F"),a(),P.next=10;break;case 7:P.prev=7,P.t0=P.catch(0),console.log(P.t0);case 10:case"end":return P.stop()}},g,null,[[0,7]])}));return function(f){return m.apply(this,arguments)}}(),o=[{title:"\u670D\u52A1\u540D\u79F0",dataIndex:"name",formItemProps:{label:"\u641C\u7D22"},fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u540D\u79F0"}},{title:"\u5730\u5740",dataIndex:"address",hideInSearch:!0},{title:"\u7F51\u7EDC\u7C7B\u578B",dataIndex:"net",valueType:"select",initialValue:"ALLNET",valueEnum:{ALLNET:"\u5168\u90E8",NETLAN:"\u5185\u7F51",NETWAN:"\u5916\u7F51"}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",valueType:"dateTime",hideInSearch:!0},{title:"\u64CD\u4F5C",valueType:"option",key:"option",render:function(g,f){return(0,L.jsxs)(xn.Z,{size:0,children:[(0,L.jsx)(ve.ZP,{type:"link",size:"small",icon:(0,L.jsx)(Tn.Z,{}),onClick:function(){return n(!0,{item:f})},children:"\u670D\u52A1\u914D\u7F6E"}),(0,L.jsx)(ve.ZP,{type:"link",size:"small",icon:(0,L.jsx)(Mn.Z,{}),onClick:function(){return r(!0,{item:f})},children:"\u4FEE\u6539"}),(0,L.jsx)(An.Z,{title:"\u786E\u5B9A\u8981\u5220\u9664\u6B64\u5185\u5BB9\u5417?",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onConfirm:function(){return c(f)},children:(0,L.jsx)(ve.ZP,{type:"link",size:"small",danger:!0,icon:(0,L.jsx)(St.Z,{}),children:"\u5220\u9664"})})]})}}];return{columns:o}},On=$n,wt=s(68296),wn=function(){var e,a,r=(0,l.useRef)(),n=(0,wt.Em)(),c=he()(n,2),o=c[0],m=c[1],g=(0,wt.Em)(),f=he()(g,2),b=f[0],P=f[1],Z=function(){r.current&&r.current.reload()},E=On({setAddCom:m,setConfigurationCom:P,onSuccess:Z}),C=E.columns,j=function(){var w=O()(d()().mark(function F(u){var D;return d()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.prev=0,R.next=3,B({name:u.name||"",size:u.pageSize,page:u.current,net:u.net||"",type:"PUSHSERVER",id:"",address:"",server:""});case 3:return D=R.sent,R.abrupt("return",{success:!0,data:D.push_list,total:D.total});case 7:return R.prev=7,R.t0=R.catch(0),R.abrupt("return",{success:!1});case 10:case"end":return R.stop()}},F,null,[[0,7]])}));return function(u){return w.apply(this,arguments)}}();return(0,L.jsxs)("div",{children:[(0,L.jsx)(Le.Z,{actionRef:r,rowKey:"id",scroll:{x:"max-content"},search:{labelWidth:80,optionRender:function(F,u,D){return[].concat(Q()(D),[(0,L.jsxs)(ve.ZP,{type:"primary",onClick:function(){return m(!0)},children:[(0,L.jsx)(q.Z,{})," \u6DFB\u52A0"]},"add")])}},request:j,columns:C}),(0,L.jsx)(Ut,{visible:o.visible,item:(e=o.param)===null||e===void 0?void 0:e.item,onSuccess:Z,onCancel:m}),(0,L.jsx)(En,{visible:b.visible,item:(a=b.param)===null||a===void 0?void 0:a.item,onCancel:P})]})},In=wn}}]);
