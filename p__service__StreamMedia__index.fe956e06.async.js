"use strict";(self.webpackChunkairview=self.webpackChunkairview||[]).push([[176],{5966:function(J,K,r){var $=r(97685),y=r(1413),G=r(91),i=r(21770),z=r(23323),m=r(55241),V=r(97435),N=r(67294),O=r(30798),p=r(85893),H=["fieldProps","proFieldProps"],I=["fieldProps","proFieldProps"],F="text",h=function(s){var a=s.fieldProps,P=s.proFieldProps,f=(0,G.Z)(s,H);return(0,p.jsx)(O.Z,(0,y.Z)({valueType:F,fieldProps:a,filedConfig:{valueType:F},proFieldProps:P},f))},Y=function(s){var a=(0,i.Z)(s.open||!1,{value:s.open,onChange:s.onOpenChange}),P=(0,$.Z)(a,2),f=P[0],D=P[1];return(0,p.jsx)(z.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(A){var g,Z=A.getFieldValue(s.name||[]);return(0,p.jsx)(m.Z,(0,y.Z)((0,y.Z)({getPopupContainer:function(u){return u&&u.parentNode?u.parentNode:u},onOpenChange:function(u){return D(u)},content:(0,p.jsxs)("div",{style:{padding:"4px 0"},children:[(g=s.statusRender)===null||g===void 0?void 0:g.call(s,Z),s.strengthText?(0,p.jsx)("div",{style:{marginTop:10},children:(0,p.jsx)("span",{children:s.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},s.popoverProps),{},{open:f,children:s.children}))}})},w=function(s){var a=s.fieldProps,P=s.proFieldProps,f=(0,G.Z)(s,I),D=(0,N.useState)(!1),B=(0,$.Z)(D,2),A=B[0],g=B[1];return a!=null&&a.statusRender&&f.name?(0,p.jsx)(Y,{name:f.name,statusRender:a==null?void 0:a.statusRender,popoverProps:a==null?void 0:a.popoverProps,strengthText:a==null?void 0:a.strengthText,open:A,onOpenChange:g,children:(0,p.jsx)("div",{children:(0,p.jsx)(O.Z,(0,y.Z)({valueType:"password",fieldProps:(0,y.Z)((0,y.Z)({},(0,V.Z)(a,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(M){var u;a==null||(u=a.onBlur)===null||u===void 0||u.call(a,M),g(!1)},onClick:function(M){var u;a==null||(u=a.onClick)===null||u===void 0||u.call(a,M),g(!0)}}),proFieldProps:P,filedConfig:{valueType:F}},f))})}):(0,p.jsx)(O.Z,(0,y.Z)({valueType:"password",fieldProps:a,proFieldProps:P,filedConfig:{valueType:F}},f))},R=h;R.Password=w,R.displayName="ProFormComponent",K.Z=R},87994:function(J,K,r){r.r(K),r.d(K,{default:function(){return se}});var $=r(19632),y=r.n($),G=r(15009),i=r.n(G),z=r(99289),m=r.n(z),V=r(5574),N=r.n(V),O=r(67294),p=r(24969),H=r(25713),I=r(14726),F=r(97857),h=r.n(F),Y=r(37476),w=r(5966),R=r(59628),b=r(90199),s=r(53424);function a(t,n){return P.apply(this,arguments)}function P(){return P=m()(i()().mark(function t(n,l){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/rpc/air-view-srv/ServerManage.AddServer",h()({method:"POST",headers:{"Content-Type":"application/json"},data:n},l||{})));case 1:case"end":return e.stop()}},t)})),P.apply(this,arguments)}(function(t){var n=t.apiUrl="/rpc/air-view-srv/ServerManage.AddServer"})(a||(a={}));function f(t,n){return D.apply(this,arguments)}function D(){return D=m()(i()().mark(function t(n,l){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/rpc/air-view-srv/ServerManage.DeleteServer",h()({method:"POST",headers:{"Content-Type":"application/json"},data:n},l||{})));case 1:case"end":return e.stop()}},t)})),D.apply(this,arguments)}(function(t){var n=t.apiUrl="/rpc/air-view-srv/ServerManage.DeleteServer"})(f||(f={}));function B(t,n){return A.apply(this,arguments)}function A(){return A=m()(i()().mark(function t(n,l){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/rpc/air-view-srv/ServerManage.GetProductBrief",h()({method:"POST",headers:{"Content-Type":"application/json"},data:n},l||{})));case 1:case"end":return e.stop()}},t)})),A.apply(this,arguments)}(function(t){var n=t.apiUrl="/rpc/air-view-srv/ServerManage.GetProductBrief"})(B||(B={}));function g(t,n){return Z.apply(this,arguments)}function Z(){return Z=m()(i()().mark(function t(n,l){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/rpc/air-view-srv/ServerManage.ListServer",h()({method:"POST",headers:{"Content-Type":"application/json"},data:n},l||{})));case 1:case"end":return e.stop()}},t)})),Z.apply(this,arguments)}(function(t){var n=t.apiUrl="/rpc/air-view-srv/ServerManage.ListServer"})(g||(g={}));function M(t,n){return u.apply(this,arguments)}function u(){return u=m()(i()().mark(function t(n,l){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/rpc/air-view-srv/ServerManage.UpdateServer",h()({method:"POST",headers:{"Content-Type":"application/json"},data:n},l||{})));case 1:case"end":return e.stop()}},t)})),u.apply(this,arguments)}(function(t){var n=t.apiUrl="/rpc/air-view-srv/ServerManage.UpdateServer"})(M||(M={}));var v=r(85893),Q=function(n){var l=n.visible,S=n.onCancel,e=n.item,U=n.onSuccess,C=(0,O.useRef)(),x=function(){C.current&&C.current.resetFields()};(0,O.useEffect)(function(){if(l){var c;(c=C.current)===null||c===void 0||c.setFieldsValue(h()({},e))}else x()},[l]);var E=function(){var c=m()(i()().mark(function o(j){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(e!=null&&e.id)){d.next=5;break}return d.next=3,M(h()({id:e.id},j));case 3:d.next=7;break;case 5:return d.next=7,a(j);case 7:R.yw.success("".concat(e!=null&&e.id?"\u4FEE\u6539":"\u6DFB\u52A0","\u6210\u529F")),U(),S(!1);case 10:case"end":return d.stop()}},o)}));return function(j){return c.apply(this,arguments)}}();return(0,v.jsxs)(Y.Y,h()(h()({title:"".concat(e?"\u4FEE\u6539":"\u6DFB\u52A0")},b.I),{},{formRef:C,open:l,onFinish:function(){var c=m()(i()().mark(function o(j){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:E(j);case 1:case"end":return d.stop()}},o)}));return function(o){return c.apply(this,arguments)}}(),modalProps:{onCancel:function(){S(!1)}},children:[(0,v.jsx)(w.Z,{label:"\u670D\u52A1\u540D\u79F0",name:"name",rules:[{required:!0,max:16}],fieldProps:{maxLength:16}}),(0,v.jsx)(w.Z,{label:"IP \u5730\u5740",name:"address",placeholder:"\u4F8B\uFF1A192.168.0.20:8080",rules:[{required:!0}]}),(0,v.jsx)(w.Z,{label:"\u5907\u6CE8",name:"desc"})]}))},X=Q,k=r(86548),q=r(48689),_=r(78957),ee=r(86738),re=function(n){var l=n.onSuccess,S=n.setAddCom,e=function(){var C=m()(i()().mark(function x(E){return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,f({id:E.id});case 3:R.yw.success("\u5220\u9664\u6210\u529F"),l(),o.next=10;break;case 7:o.prev=7,o.t0=o.catch(0),console.log(o.t0);case 10:case"end":return o.stop()}},x,null,[[0,7]])}));return function(E){return C.apply(this,arguments)}}(),U=[{title:"\u670D\u52A1\u540D\u79F0",dataIndex:"name",formItemProps:{label:"\u641C\u7D22"},fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u540D\u79F0"}},{title:"\u5730\u5740",dataIndex:"address",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",valueType:"dateTime",hideInSearch:!0},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:200,render:function(x,E){return[(0,v.jsxs)(_.Z,{size:0,children:[(0,v.jsx)(I.ZP,{type:"link",size:"small",icon:(0,v.jsx)(k.Z,{}),onClick:function(){return S(!0,{item:E})},children:"\u4FEE\u6539"}),(0,v.jsx)(ee.Z,{title:"\u786E\u5B9A\u8981\u5220\u9664\u6B64\u5185\u5BB9\u5417?",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onConfirm:function(){return e(E)},children:(0,v.jsx)(I.ZP,{danger:!0,size:"small",icon:(0,v.jsx)(q.Z,{}),type:"link",children:"\u5220\u9664"})})]})]}}];return{columns:U}},ne=re,ae=r(68296),te=function(){var n,l=(0,O.useRef)(),S=(0,ae.Em)(),e=N()(S,2),U=e[0],C=e[1],x=function(){l.current&&l.current.reload()},E=ne({setAddCom:C,onSuccess:x}),c=E.columns,o=function(){var j=m()(i()().mark(function L(d){var W;return i()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.prev=0,T.next=3,g({name:d.name||"",is_desc:!0,size:d.pageSize,page:d.current});case 3:return W=T.sent,T.abrupt("return",{success:!0,data:W.server_list,total:W.total});case 7:return T.prev=7,T.t0=T.catch(0),T.abrupt("return",{success:!1});case 10:case"end":return T.stop()}},L,null,[[0,7]])}));return function(d){return j.apply(this,arguments)}}();return(0,v.jsxs)("div",{children:[(0,v.jsx)(H.Z,{actionRef:l,rowKey:"id",scroll:{x:"max-content"},search:{labelWidth:80,optionRender:function(L,d,W){return[].concat(y()(W),[(0,v.jsxs)(I.ZP,{type:"primary",onClick:function(){return C(!0)},children:[(0,v.jsx)(p.Z,{})," \u6DFB\u52A0"]},"add")])}},request:o,columns:c}),(0,v.jsx)(X,{visible:U.visible,item:(n=U.param)===null||n===void 0?void 0:n.item,onSuccess:x,onCancel:C})]})},se=te}}]);
