"use strict";(self.webpackChunkairview=self.webpackChunkairview||[]).push([[895],{18062:function(te,z,e){e.d(z,{Z:function(){return c}});var m=e(1413),p=e(91),j=e(67294),S=e(4836),E=e(98916),y=e(36640),W=e(60947),i=e(85893),n=["className","onScroll","onMouseEnter","onMouseLeave","innerRef","children","minThumbSize","ghost","suppressScrollX","suppressScrollY","theme","Wrapper"];function I(a){var x=a.className,D=a.onScroll,d=a.onMouseEnter,T=a.onMouseLeave,X=a.innerRef,M=a.children,P=a.minThumbSize,R=a.ghost,v=a.suppressScrollX,g=a.suppressScrollY,u=a.theme,G=u===void 0?"white":u,oe=a.Wrapper,se=(0,p.Z)(a,n),$=(0,j.useRef)(null);(0,S.lE)(X,$);var Y=(0,E.Z)({scrollBox:$,minThumbSize:P}),le=Y.updateLayerThrottle,ce=Y.updateLayerNow,b=Y.horizontalBar,J=Y.verticalBar,w=Y.updateBarVisible;function ue(F){D&&D(F),le()}function U(F){d&&d(F),ce()}function ie(F){T&&T(F),w(!1)}return(0,i.jsxs)(oe,(0,m.Z)((0,m.Z)({className:(0,y.AK)("infore-container",x),ref:$,onScroll:ue,onMouseEnter:U,onMouseLeave:ie},se),{},{children:[(0,i.jsxs)("div",{className:(0,y.AK)("infore-track-box","infore-theme-".concat(G),R?"infore-ghost":""),children:[!v&&b,!g&&J]}),M]}))}var V=["suppressScrollX","suppressScrollY","suppressMacOS","as","style","children"],A=(0,j.forwardRef)(function(a,x){var D=a.suppressScrollX,d=a.suppressScrollY,T=a.suppressMacOS,X=T===void 0?!0:T,M=a.as,P=M===void 0?"div":M,R=a.style,v=a.children,g=(0,p.Z)(a,V),u=(0,m.Z)({overflowX:(0,y.pr)(D),overflowY:(0,y.pr)(d)},R),G=P;return(0,y.EI)(X)?(0,i.jsx)(I,(0,m.Z)((0,m.Z)({style:u,innerRef:x,suppressScrollX:D,suppressScrollY:d,Wrapper:G},g),{},{children:v})):(0,i.jsx)(G,(0,m.Z)((0,m.Z)({style:u,ref:x},g),{},{children:v}))}),c=A},44762:function(te,z,e){e.d(z,{Z:function(){return W}});var m=e(93967),p=e.n(m),j=e(71893),S={screen_bar_container:"screen_bar_container___ugp7T",shrink:"shrink___JESD1",close:"close___f3F3O",screen:"screen___fz0MG",screenIconWrap:"screenIconWrap___SjrMa",active:"active___rpqr5"},E=e(85893),y=function(n){var I=n.currentGrid,V=n.onClick,A=n.changeCloseTree,c=n.isCloseTree,a=n.changeFull,x=n.fullscreen,D=[{name:"screen_icon1",value:1},{name:"screen_icon4",value:4},{name:"screen_icon5",value:5},{name:"screen_icon6",value:6},{name:"screen_icon8",value:8},{name:"screen_icon9",value:9},{name:"screen_icon16",value:16}];return(0,E.jsxs)("div",{className:p()(S.screen_bar_container,"dark:!border-[#424242]"),children:[!x&&(0,E.jsx)(j.Z,{name:"pack_up",className:p()(S.shrink,c&&S.close),onClick:function(){return A(!c)}}),(0,E.jsx)(j.Z,{name:x?"nonscreen":"fullscreen",className:p()(S.screen),onClick:a}),D.map(function(d){return(0,E.jsx)(j.Z,{name:d.name,className:p()(S.screenIconWrap,I===d.value&&S.active),onClick:function(){return V(d.value)}},d.value)})]})},W=y},43538:function(te,z,e){e.d(z,{Z:function(){return V}});var m=e(97857),p=e.n(m),j=e(9783),S=e.n(j),E=e(61280),y=e(93967),W=e.n(y),i={screen_grid_container:"screen_grid_container___YZEf_",item_grid_container:"item_grid_container___LCa5o",select_border:"select_border___ZN6XQ",active:"active___WaPth",num1:"num1___QDsJc",num4:"num4___G2aca",num5:"num5___FsUku",num6:"num6___bfkPD",num8:"num8___WLKBM",num9:"num9___TKAh2",num16:"num16___I1BsU",input_title_wrap:"input_title_wrap___bzI72"},n=e(85893),I=function(c){var a=c.currentGrid,x=c.videoListData,D=c.currentSelectIndex,d=c.onChangeSelectGrig,T=c.onDrop,X=c.onSuccess,M=c.onDownload,P=c.onPhotograph,R=c.onZoom;return(0,n.jsx)("div",{className:W()(i.screen_grid_container,i["num".concat(a)],"dark:!bg-[#424242]"),children:x.map(function(v,g){return(0,n.jsxs)("div",{onClick:function(){return d(g)},onDragOver:function(G){return G.preventDefault()},onDrop:function(){return T(g)},className:"".concat(i.item_grid_container),style:{display:g+1<=a?"block":"none"},children:[(0,n.jsx)("div",{className:W()(S()(S()({},i.select_border,!0),i.active,g===D))}),(0,n.jsx)(E.Z,{isActual:c.isActual,isfocus:g===D,src:v.url,parentNum:a,controls:!0,type:"webrtc",videoName:v.name,reqRtcUrlState:v.stauts,onSuccess:X,hiddenTimeline:!0,hiddenTime:!0,onDownload:M&&v.channel_id?function(){return M(v)}:void 0,onPhotograph:function(){P==null||P(v)},onZoom:v.ptz?function(u){R==null||R(p()(p()({},u),v))}:void 0})]},"".concat(g+1))})})},V=I},67419:function(te,z,e){e.d(z,{Z:function(){return ye}});var m=e(15009),p=e.n(m),j=e(99289),S=e.n(j),E=e(97857),y=e.n(E),W=e(5574),i=e.n(W),n=e(67294),I=e(87462),V=e(63511),A=e(84089),c=function(N,O){return n.createElement(A.Z,(0,I.Z)({},N,{ref:O,icon:V.Z}))},a=n.forwardRef(c),x=a,D=e(25882),d=function(N,O){return n.createElement(A.Z,(0,I.Z)({},N,{ref:O,icon:D.Z}))},T=n.forwardRef(d),X=T,M=e(79890),P=function(N,O){return n.createElement(A.Z,(0,I.Z)({},N,{ref:O,icon:M.Z}))},R=n.forwardRef(P),v=R,g=e(31673),u=e(78957),G=e(93967),oe=e.n(G),se=e(50344),$=e(98423),Y=e(87263),le=e(8745),ce=e(53124),b=e(34041);const{Option:J}=b.default;function w(C){return C&&C.type&&(C.type.isSelectOption||C.type.isSelectOptGroup)}const ue=(C,N)=>{var O;const{prefixCls:ve,className:fe,popupClassName:q,dropdownClassName:K,children:_,dataSource:B}=C,L=(0,se.Z)(_);let Q;L.length===1&&n.isValidElement(L[0])&&!w(L[0])&&([Q]=L);const ee=Q?()=>Q:void 0;let H;L.length&&w(L[0])?H=_:H=B?B.map(f=>{if(n.isValidElement(f))return f;switch(typeof f){case"string":return n.createElement(J,{key:f,value:f},f);case"object":{const{value:k}=f;return n.createElement(J,{key:k,value:k},f.text)}default:return}}):[];const{getPrefixCls:he}=n.useContext(ce.E_),ne=he("select",ve),[re]=(0,Y.Cn)("SelectLike",(O=C.dropdownStyle)===null||O===void 0?void 0:O.zIndex);return n.createElement(b.default,Object.assign({ref:N,suffixIcon:null},(0,$.Z)(C,["dataSource","dropdownClassName"]),{prefixCls:ne,popupClassName:q||K,dropdownStyle:Object.assign(Object.assign({},C.dropdownStyle),{zIndex:re}),className:oe()(`${ne}-auto-complete`,fe),mode:b.default.SECRET_COMBOBOX_MODE_DO_NOT_USE,getInputElement:ee}),H)},U=n.forwardRef(ue),ie=(0,le.Z)(U);U.Option=J,U._InternalPanelDoNotUseOrYouWillBeFired=ie;var F=U,me=e(59628),pe=e(36493),Se=e(83765),Z=e(85893),ge=g.Z.DirectoryTree,de=[],Ce=function(N){var O=N.onChange,ve=N.onDragEnd,fe=(0,n.useState)([]),q=i()(fe,2),K=q[0],_=q[1],B=(0,n.useRef)(0),L=(0,n.useRef)(),Q=(0,n.useState)(""),ee=i()(Q,2),H=ee[0],he=ee[1],ne=(0,n.useState)(),re=i()(ne,2),f=re[0],k=re[1],xe=function(l,s,t){return l.map(function(o){return y()(y()({},o),{},{title:(0,Z.jsxs)(u.Z,{style:{color:o.online===1?"#00a65a":""},children:[(0,Z.jsx)(x,{}),o.name]}),key:o.channel_id+s,channelId:o.channel_id,parentId:s,isChannel:!0,online:o.online,name:o.name,device_type:t})})},De=function h(l,s){var t=[],o=[];return s==null||s.forEach(function(r){r.device_type==="RTSP"?o.push({title:(0,Z.jsxs)(u.Z,{style:{color:r.online===1?"#52c41a":""},children:[(0,Z.jsx)(x,{}),r.name]}),key:r.sn,channelId:"",parentId:r.sn,isChannel:!0,online:r.online,name:r.name,device_type:r.device_type}):o.push({title:(0,Z.jsxs)(u.Z,{children:[(0,Z.jsx)(X,{}),r.name]}),key:r.id,selectable:!1,name:r.name,children:xe(r.channels,r.sn,r.device_type)})}),l.forEach(function(r){t.push({title:(0,Z.jsxs)(u.Z,{children:[(0,Z.jsx)(v,{}),r.name]}),key:r.id,selectable:!1,name:r.name,children:h(r.sub_groups,r.device_list)})}),t.concat(o)},Ze=function(){var h=S()(p()().mark(function l(){var s;return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,Se.fL)({tenant:pe.cm,online:0});case 2:s=o.sent,_(De(s.group_list));case 4:case"end":return o.stop()}},l)}));return function(){return h.apply(this,arguments)}}();(0,n.useEffect)(function(){return Ze(),function(){clearTimeout(L.current)}},[]);var Oe=function h(l){for(var s=0;s<l.length;s++){var t=l[s],o=t.key,r=t.title,ae=t.name,Ie=ae===void 0?"":ae,Me=t.isChannel;de.push({key:o,title:r,name:Ie,isChannel:Me}),t.children&&h(t.children)}};(0,n.useEffect)(function(){K.length&&(de=[],Oe(K))},[K]);var je=function(l,s){var t=s.node;B.current++,!(B.current>=2)&&(L.current=setTimeout(function(){if(B.current===1)B.current=0;else if(B.current>1){if(B.current=0,t.online!==1)return me.yw.error("\u76D1\u63A7\u4E0D\u5728\u7EBF");O(t)}return""},300))},Ee=function(l){k({keys:l,auto:!1})},Te=function h(l,s){for(var t,o=0;o<s.length;o++){var r=s[o];r.children&&(r.children.some(function(ae){return ae.name===l})?t=r.key:h(l,r.children)&&(t=h(l,r.children)))}return t},Ne=function(l){var s=de.map(function(t){return t.name.indexOf(l)>-1?Te(t.name,K):null}).filter(function(t,o,r){return t&&r.indexOf(t)===o});he(l),k({keys:s,auto:!0})};return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(F,{style:{width:"100%",marginBottom:"20px"},value:H,onChange:function(l){Ne(l)},placeholder:"\u8BF7\u8F93\u5165\u901A\u9053\u540D\u79F0\u641C\u7D22"}),(0,Z.jsx)(ge,{defaultExpandAll:!0,onExpand:Ee,autoExpandParent:f==null?void 0:f.auto,expandedKeys:f==null?void 0:f.keys,treeData:K,onSelect:je,rootStyle:{fontSize:16,fontWeight:550},showIcon:!1,draggable:!0,onDragEnd:function(l){var s=l.node;if(s.isChannel){if(s.online!==1){me.yw.error("\u76D1\u63A7\u4E0D\u5728\u7EBF");return}ve(s)}}})]})},ye=Ce}}]);
